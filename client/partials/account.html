<div class="account">
  <div class="panel">
    <h1>Your API Key is
    </h1>
    <div ng-controller="UsernameCtrl">
      <div ng-controller="StatsCtrl">
        <div>
          <div id="view-set-api">
            <input type="text" id="api-key-display" value="{{currentUser.apiKey}}" readonly="readonly">
            <span><button id="change-api-key" ng-click="changeAPIKey()">Change</button></span>
          </div>

          <!-- <p>
            {{currentUser.apiKey}}
          </p> -->
          <div id="domain-api-container">
            <button ng-click="toggleDomainApi()">APIKey/Domain Link</button>
            <div ng-hide="hideOptions">
              <h1>To link your APIKey to your domain</h1>
              <p>Web apps using IceComm can be hosted on any domain. For additional flexiblity, IceComm provides developers the option to link their APIKey to their domain to prevent other users from using their APIKey.</p>
              <form ng-submit="lockDomain(domain)" id="apiDomainForm" name="domain_form">
                <input type="url" id="domainInput" name="domain" ng-model="domain" placeholder="http://www.yourdomain.com"/>
                <span><button type="submit" id="setDomainBtn" value="Login">Set</button></span>

                <div id="apiDomain" ng-show="currentUser.url.length > 0">
                  Your APIKey is currently linked to the following domain: {{currentUser.url}}
                </div>
                <div ng-show="domainLockedSuccessMessage">
                Domain successfully locked
                </div>
              </form>
            </div>
            <div ng-show="hideOptions"></div>
          </div>
        </div>
        <div id="stats-container">
          <button id="show-stats-btn" ng-click="getStats()">Show usage statistics</button>
          <br>
          <!-- <small>{{noConnectionsMsg}}</small> -->
          {{noConnectionsMsg}}
          <div id="chart"></div>
        </div>
        <div id="admin-container" ng-controller="AdminCtrl">
          <button ng-show="isAdmin()" id="admin-stats-btn" ng-click="getAdminStats(requestAdminStats)">Show admin statistics</button>
          <div id="chart2"></div>
        </div>
      </div>
    </div>
</div>
