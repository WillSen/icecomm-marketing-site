<div class="account">
  <div class="panel">
    <h1>Your API Key is
    </h1>
    <div ng-controller="UsernameCtrl">
      <div ng-controller="StatsCtrl">
        <div>
          <div id="view-set-api">
            <input type="text" id="api-key-display" value="{{currentUser.apiKey}}" readonly="readonly">
            
            <p class="changeAPI" ng-click="changeAPIKey()">Change your API Key</p>
          </div>

          <!-- <p>
            {{currentUser.apiKey}}
          </p> -->
          <div id="domain-api-container">
            <button ng-click="toggleDomainApi()">Link your API Key to your domain</button>
            <div ng-hide="hideOptions">
              <p>Web apps using IceComm can be hosted on any domain. </p>
              <p>
                For additional flexiblity you can link your API Key to your domain to prevent other users from using your API Key on their domain</p>
              <form ng-submit="lockDomain(domain)" id="apiDomainForm" name="domain_form">
                <input type="url" id="domainInput" name="domain" ng-model="domain" placeholder={{url}}/>
                <span><button type="submit" id="setDomainBtn" value="Login">Set</button></span>

                <div id="apiDomain" ng-show="currentUser.url.length > 0">
                  Your APIKey is currently linked to the following domain: {{currentUser.url}}
                </div>
                <div ng-show="domainLockedSuccessMessage">
                Domain successfully locked
                </div>
              </form>
            </div>
            <div ng-show="hideOptions"></div>
          </div>
        </div>
        <div id="stats-container">
          <button id="show-stats-btn" ng-click="getStats()">Show usage statistics</button>
          <br>
          <!-- <small>{{noConnectionsMsg}}</small> -->
          {{noConnectionsMsg}}
          <div id="chart"></div>
        </div>
        <div id="admin-container" ng-controller="AdminCtrl">
          <button ng-show="isAdmin()" id="admin-stats-btn" ng-click="getAdminStats(requestAdminStats)">Show admin statistics</button>
          <div id="chart2"></div>
        </div>
      </div>
    </div>
</div>
